---

- name: uninstall unneeded networking packages
  package:
    name: "{{item}}"
    state: absent
  with_items:
    - network-manager
    - isc-dhcp-client
    - wpasupplicant
    - swconfig

- name: upload networking init script
  copy:
    src: files/networking
    dest: /etc/init.d/networking
    mode: 0755

- name: upload networking service unit
  copy:
    src: files/networking.service
    dest: /etc/systemd/system/networking.service
    mode: 0644

- name: enable and start networking service
  systemd:
    name: networking.service
    state: started
    enabled: True
    daemon_reload: True